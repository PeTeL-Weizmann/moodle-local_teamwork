define ("local_teamwork/rubric_export",["jquery","core/str","core/ajax","core/notification"],function(a,b,c,d){return{selector:{wrapper:"#rubric-advancedgrading",wrapper_error:"#id_error_advancedgrading",button:"#save-rubrics"},init:function init(e,f){var g={};location.search.substr(1).split("&").forEach(function(a){g[a.split("=")[0]]=a.split("=")[1]});if(0===g.id.length||0===g.action.length||"grader"!==g.action)return;var h=g.id,i="";b.get_string("rubricsave_notice","local_teamwork").done(function(a){i=a});var j="";b.get_string("rubricsave","local_teamwork").done(function(a){j=a});var k=this;this.waitForElement(this.selector.wrapper,function(){a("<span></span><a id=\"save-rubrics\" class=\"btn btn-primary mt-10\" style=\"color:white;font-weight: bold;\">"+j+"</a>"+i+"</span>").insertAfter(k.selector.wrapper);var b=a(k.selector.button);b.on("click",function(b){var g=a(b.target),i=window.document.getElementsByClassName("gradingform_rubric")[0];k.loadingPage();require(["local_teamwork/html2pdf_bundle"],function(a){a().from(i).set({margin:1,filename:"test.pdf",html2canvas:{scale:2},jsPDF:{orientation:"portrait",unit:"in",format:"letter",compressPDF:!0}}).outputPdf().then(function(a){c.call([{methodname:"local_teamwork_save_rubrics_pdf",args:{assignid:+h,userid:+e,content:btoa(a)},done:function done(){f()},fail:d.exception}])})})})})},waitForElement:function waitForElement(b,c){var d=this;window.setTimeout(function(){if(a(b).length){c(b,a(b))}else{d.waitForElement(b,c)}},500)},loadingPage:function loadingPage(){var b=a("<div class = \"loading\" style=\"display: flex; position: fixed; z-index: 99999; top: 0; bottom: 0; right: 0; left: 0; background: #0000006b;\">"+("<div class = \"spinner\" style = \""+"margin: auto;width: 6rem;height: 6rem;border: .6em solid #fff;border-right-color: transparent;border-radius: 50%;animation: spinner-border .75s linear infinite;"+"\"></div>")+"</div>");a("body").append(b)}}});
//# sourceMappingURL=rubric_export.min.js.map
