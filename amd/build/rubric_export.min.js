define(["jquery","core/str","core/ajax","core/notification","local_teamwork/html2pdf_bundle"],function(t,e,r,n,i){return{selector:{wrapper:"#rubric-advancedgrading",wrapper_error:"#id_error_advancedgrading",button:"#save-rubrics"},init:function(o,a){var c={};if(location.search.substr(1).split("&").forEach(function(t){c[t.split("=")[0]]=t.split("=")[1]}),0!==c.id.length&&0!==c.action.length&&"grader"===c.action){var s=c.id,l="";e.get_string("rubricsave","local_teamwork").done(function(t){l=t});var u=this;this.waitForElement(this.selector.wrapper,function(){t('<a id="save-rubrics" class="btn btn-primary mt-10" style="color:white;font-weight: bold;">'+l+"</a>").insertAfter(u.selector.wrapper),t(u.selector.button).on("click",function(e){t(e.target);var c=window.document.getElementsByClassName("gradingform_rubric")[0];i().from(c).set({margin:1,filename:"test.pdf",html2canvas:{scale:2},jsPDF:{orientation:"portrait",unit:"in",format:"letter",compressPDF:!0}}).outputPdf().then(function(t){r.call([{methodname:"local_teamwork_save_rubrics_pdf",args:{assignid:Number(s),userid:Number(o),content:btoa(t)},done:function(){a()},fail:n.exception}])})})})}},waitForElement:function(e,r){var n=this;window.setTimeout(function(){t(e).length?r(e,t(e)):n.waitForElement(e,r)},500)}}});