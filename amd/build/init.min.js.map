{"version":3,"sources":["../src/init.js"],"names":["define","$","str","Ajax","popup","render","drag","skin","loadingIcon","Notification","mainBlock","document","querySelector","set_teamwork_enable","courseid","activityid","moduletype","callback","call","methodname","args","done","data","fail","error","set_access_to_student","target","checked","add_new_card","selectgroupid","show","remove","delete_card","teamid","show_random_popup","result","JSON","parse","textHead","header","text","content","student_settings_enddate_state","teamuserallowenddatechkbox","allinputs","Array","from","querySelectorAll","addEventListener","e","forEach","item","removeAttribute","value","setAttribute","render_student_settings_popup","setTimeout","student_settings_popup_data","popupForm","teamNumbers","teamUserNumbers","teamUserendDate","teamUserendMonth","teamUserendYear","teamUserendHour","teamUserendMinute","teamuserallowenddate","teamnumbers","teamusernumbers","teamuserenddate","teamuserendmonth","teamuserendyear","teamuserendhour","teamuserendminute","set_random_teams","classList","contains","parentNode","numberofstudent","set_new_team_name","cardid","dataset","team_id","cardname","searchStudentByName","studentList","hiddenClass","searchItem","innerHTML","toLowerCase","search","add","searchInit","searchInput","searchReset","init","self","el","append","renderHtmlToPage","exception","sesskey","M","cfg","on","event","handler","toggle","toggleClass","preventDefault","next","slideToggle","html","siblings","removeClass","val","children","push","parent","stringify","teamsCard","setDefaultData","remove_team_id","startDrag","keyCode"],"mappings":"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","sourcesContent":["define([\n    'jquery',\n    'core/str',\n    'core/ajax',\n    'local_teamwork/popup',\n    'local_teamwork/render',\n    'local_teamwork/dragula',\n    'local_teamwork/skin',\n    'local_teamwork/loading',\n    'core/notification',\n], function ($, str, Ajax, popup, render, drag, skin, loadingIcon, Notification) {\n    'use strict';\n\n    const mainBlock = document.querySelector('body');\n\n    const set_teamwork_enable = (courseid, activityid, moduletype, callback) => {\n        Ajax.call([{\n            methodname: 'local_teamwork_set_teamwork_enable',\n            args: {\n                activityid: Number(activityid),\n                moduletype: moduletype,\n            },\n            done: function (data) {\n                callback(data);\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    const set_access_to_student = (courseid, activityid, moduletype, target) => {\n        const access = target.checked;\n\n        Ajax.call([{\n            methodname: 'local_teamwork_set_access_to_student',\n            args: {\n                activityid: Number(activityid),\n                moduletype: moduletype,\n            },\n            done: function (data) {\n\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    const add_new_card = (courseid, activityid, moduletype, selectgroupid, callback) => {\n\n        loadingIcon.show();\n        Ajax.call([{\n            methodname: 'local_teamwork_add_new_card',\n            args: {\n                courseid: Number(courseid),\n                activityid: Number(activityid),\n                moduletype: moduletype,\n                selectgroupid: selectgroupid,\n            },\n            done: function (data) {\n                loadingIcon.remove();\n                callback(data);\n            },\n            fail: function () {\n                loadingIcon.remove();\n                popup.error();\n            }\n        }]);\n    };\n\n    const delete_card = (teamid, courseid, activityid, moduletype, callback) => {\n\n        loadingIcon.show();\n        Ajax.call([{\n            methodname: 'local_teamwork_delete_card',\n            args: {\n                teamid: teamid\n            },\n            done: function (data) {\n                loadingIcon.remove();\n                callback(data);\n            },\n            fail: function () {\n                loadingIcon.remove();\n                popup.error();\n            }\n        }]);\n    };\n\n    const show_random_popup = () => {\n        Ajax.call([{\n            methodname: 'local_teamwork_show_random_popup',\n            args: {},\n            done: function (data) {\n                let result = JSON.parse(data.result);\n                popup.textHead = result.header;\n                popup.text = result.content;\n                popup.show();\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    /* toggle actions on allow enddate checkbox status change in student settings popup */\n    const student_settings_enddate_state = () => {\n        const teamuserallowenddatechkbox = document.querySelector(\"#teamuserallowenddate\");\n        const allinputs = Array.from(\n            document.querySelectorAll(\".teamuserenddate-inputs-wrapper input, .teamuserenddate-inputs-wrapper select\")\n        );\n        teamuserallowenddatechkbox.addEventListener(\"change\", e => {\n            if (e.target.checked) {\n                allinputs.forEach(item => {\n                    item.removeAttribute(\"disabled\");\n                });\n                e.target.value = \"1\";\n            } else {\n                allinputs.forEach(item => {\n                    item.setAttribute(\"disabled\", \"disabled\");\n                });\n                e.target.value = \"0\";\n            }\n        });\n    };\n\n    /* render_student_settings_popup */\n    const render_student_settings_popup = (activityid, moduletype) => {\n        Ajax.call([{\n            methodname: 'local_teamwork_render_student_settings_popup',\n            args: {\n                activityid: activityid,\n                moduletype: moduletype\n            },\n            done: function (data) {\n                let result = JSON.parse(data.result);\n                popup.textHead = result.header;\n                popup.text = result.content;\n                popup.show();\n                setTimeout(student_settings_enddate_state, 1000);\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    const student_settings_popup_data = (courseid, activityid, moduletype) => {\n        const popupForm = document.querySelector(\".teamwork-modal\");\n        const teamNumbers = popupForm.querySelector('#teamnumbers').value;\n        const teamUserNumbers = popupForm.querySelector('#teamusernumbers').value;\n        const teamUserendDate = popupForm.querySelector(\n            \"input[name=team-userend-date]\"\n        ).value;\n        const teamUserendMonth = popupForm.querySelector(\n            \"select[name=team-userend-month]\"\n        ).value;\n        const teamUserendYear = popupForm.querySelector(\n            \"input[name=team-userend-year]\"\n        ).value;\n        const teamUserendHour = popupForm.querySelector(\n            \"input[name=team-userend-hour]\"\n        ).value;\n        const teamUserendMinute = popupForm.querySelector(\n            \"input[name=team-userend-minute]\"\n        ).value;\n        const teamuserallowenddate = popupForm.querySelector(\n            \"input[name=teamuserallowenddate]\"\n        ).value;\n\n        loadingIcon.show();\n        Ajax.call([{\n            methodname: 'local_teamwork_student_settings_popup_data',\n            args: {\n                courseid: Number(courseid),\n                activityid: Number(activityid),\n                moduletype: moduletype,\n                teamnumbers: Number(teamNumbers),\n                teamusernumbers: Number(teamUserNumbers),\n                teamuserenddate: Number(teamUserendDate),\n                teamuserendmonth: Number(teamUserendMonth),\n                teamuserendyear: Number(teamUserendYear),\n                teamuserendhour: Number(teamUserendHour),\n                teamuserendminute: Number(teamUserendMinute),\n                teamuserallowenddate: Number(teamuserallowenddate),\n            },\n            done: function (data) {\n                loadingIcon.remove();\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    const set_random_teams = (target, courseid, activityid, moduletype, selectgroupid, callback) => {\n        while (!target.classList.contains('teamwork-modal')) {\n            target = target.parentNode;\n        }\n        const numberofstudent = target.querySelector('#student_number').value;\n\n        loadingIcon.show();\n        Ajax.call([{\n            methodname: 'local_teamwork_set_random_teams',\n            args: {\n                courseid: Number(courseid),\n                activityid: Number(activityid),\n                moduletype: moduletype,\n                selectgroupid: selectgroupid,\n                numberofstudent: Number(numberofstudent),\n            },\n            done: function (data) {\n                loadingIcon.remove();\n                callback(data);\n            },\n            fail: function () {\n                loadingIcon.remove();\n                popup.error();\n            }\n        }]);\n    };\n\n    const set_new_team_name = target => {\n        const cardid = target.dataset.team_id;\n        const cardname = target.value;\n\n        Ajax.call([{\n            methodname: 'local_teamwork_set_new_team_name',\n            args: {\n                cardid: Number(cardid),\n                cardname: cardname,\n            },\n            done: function (data) {\n\n            },\n            fail: function () {\n                popup.error();\n            }\n        }]);\n    };\n\n    // Search student by name on student list.\n    const searchStudentByName = target => {\n        const studentList = Array.from(\n            document.querySelectorAll(\"#studentList div[data-student_id]\")\n        );\n        const hiddenClass = 'visuallyhidden';\n        const searchItem = target.value;\n    if (!searchItem) {\n        studentList.forEach(item => {\n            item.classList.remove(hiddenClass);\n        });\n        return;\n    }\n\n        studentList.forEach(item => {\n            if (item.innerHTML.toLowerCase().search(searchItem.toLowerCase()) >= 0) {\n                item.classList.remove(hiddenClass);\n            } else {\n                item.classList.add(hiddenClass);\n            }\n        });\n    };\n\n    const searchInit = () => {\n        // Init search for student list.\n        const searchInput = mainBlock.querySelector(\n            'input[data-handler = \"search_student\"]'\n        );\n        searchInput.addEventListener(\"input\", function (e) {\n            searchStudentByName(searchInput);\n        });\n    };\n\n    const searchReset = target => {\n        const studentList = Array.from(\n            document.querySelectorAll(\"#studentList div[data-student_id]\")\n        );\n        const hiddenClass = 'visuallyhidden';\n        const searchInput = mainBlock.querySelector(\n            'input[data-handler = \"search_student\"]'\n        );\n\n        searchInput.value = '';\n        studentList.forEach(item => {\n            item.classList.remove(hiddenClass);\n        });\n    };\n\n    return {\n        init: function (courseid, activityid, moduletype, selectgroupid) {\n            var self = this;\n\n            Ajax.call([{\n                methodname: 'local_teamwork_render_block_html_page',\n                args: {\n                    courseid: Number(courseid),\n                    activityid: Number(activityid),\n                    moduletype: moduletype,\n                    selectgroupid: selectgroupid\n                },\n                done: function (data) {\n                    var el = $(\"body#page-mod-assign-view #intro\");\n                    el.append(data.result);\n                    self.renderHtmlToPage(courseid, activityid, moduletype, selectgroupid);\n                },\n                fail: Notification.exception\n            }]);\n        },\n        renderHtmlToPage: function (courseid, activityid, moduletype, selectgroupid) {\n            render.data = {\n                sesskey: M.cfg.sesskey,\n                courseid: courseid,\n                activityid: activityid,\n                moduletype: moduletype,\n                selectgroupid: selectgroupid\n            };\n\n            // Run and open local window.\n            $(\"#open_local\").on(\"click\", function () {\n                render.mainBlock(searchInit);\n            });\n\n            document.addEventListener('click', function (event) {\n                let target = event.target;\n                while (target !== mainBlock) {\n                    // Activate/diactivate teamwork.\n                    if (target.dataset.handler === 'teamwork_toggle') {\n                        target.classList.toggle('active');\n\n                        $(\".skin_shadow\").toggleClass(\"skin_show\");\n                        $(\".skin_shadow\").toggleClass(\"skin_hide\");\n                        set_teamwork_enable(courseid, activityid, moduletype);\n                        return;\n                    }\n\n                    // Close popups.\n                    if (\n                        target.classList.contains('close_popup') ||\n                        target.classList.contains('teamwork-modal_close')\n                    ) {\n                        if (target.classList.contains('stop-close')) {\n                            return;\n                        }\n                        popup.remove();\n                        return;\n                    }\n\n                    // Close skin popup.\n                    if (target.classList.contains('skin_close') || target.classList.contains('close_btn')) {\n                        skin.remove();\n                        return;\n                    }\n\n                    // Show show student_setting popup.\n                    if (target.dataset.handler === 'access_to_student') {\n                        if (target.classList.contains('active')) {\n                            target.classList.remove('active');\n                            set_access_to_student(courseid, activityid, moduletype, target);\n                        } else {\n                            target.classList.add('active');\n                            render_student_settings_popup(activityid, moduletype);\n                            set_access_to_student(courseid, activityid, moduletype, target);\n                        }\n                    }\n\n                    // Get data from popup form.\n                    if (target.dataset.handler === 'get_popup_data') {\n                        event.preventDefault();\n                        student_settings_popup_data(courseid, activityid, moduletype);\n                        popup.remove();\n                        return;\n                    }\n\n                    // Open select group menu.\n                    if (target.dataset.handler === 'open_group_selection') {\n                        $(target)\n                            .next()\n                            .slideToggle();\n                        return;\n                    }\n\n                    // Handle select group.\n                    if (target.dataset.handler === 'select_groups') {\n                        let text = document.querySelector('html[lang=\"en\"]')\n                            ? \"choose grous\"\n                            : \"בחר קבוצה\";\n                        if (target.classList.contains('selected')) {\n                            return\n                        }\n                        target.classList.toggle('selected');\n                        $('div[data-handler=\"open_group_selection\"]').html(\n                            target.classList.contains('selected') ? target.innerHTML : text\n                        );\n\n                        $(target)\n                            .siblings()\n                            .removeClass(\"selected\");\n\n                        let result = [];\n                        let val = Array.from(target.parentNode.children);\n                        val.forEach(item => {\n                            if (item.classList.contains('selected')) {\n                                result.push(item.dataset.value);\n                            }\n                        });\n                        $(target)\n                            .parent()\n                            .slideToggle();\n                        selectgroupid = JSON.stringify(result);\n                        render.data.selectgroupid = JSON.stringify(result);\n                        render.studentList();\n                        render.teamsCard();\n                        return;\n                    }\n\n                    // Add new team card.\n                    if (target.dataset.handler === 'add_new_teamcard') {\n                        add_new_card(\n                            courseid,\n                            activityid,\n                            moduletype,\n                            selectgroupid,\n                            function () {\n                                render.setDefaultData();\n                                render.studentList();\n                                render.teamsCard();\n                            }\n                        );\n\n                        return;\n                    }\n\n                    // Delete team card.\n                    if (target.dataset.handler === 'delete_teamcard') {\n                        let teamid = target.dataset.remove_team_id;\n                        delete_card(teamid, courseid, activityid, moduletype, function () {\n                            render.setDefaultData();\n                            render.teamsCard();\n                            render.studentList();\n                        });\n\n                        return;\n                    }\n\n                    // Show popup to determine the random number of students on the each team.\n                    if (target.dataset.handler === 'random_popup') {\n                        show_random_popup();\n                        return;\n                    }\n\n                    // Set random teams.\n                    if (target.dataset.handler === 'random') {\n                        set_random_teams(\n                            target,\n                            courseid,\n                            activityid,\n                            moduletype,\n                            render.data.selectgroupid,\n                            function () {\n                                render.teamsCard();\n                                render.studentList();\n                                popup.remove();\n                            }\n                        );\n                        return;\n                    }\n\n                    // Search reset.\n                    if (target.dataset.handler === 'search_reset') {\n                        searchReset(target);\n                        return;\n                    }\n\n                    target = target.parentNode;\n                }\n            });\n\n            // Init drug and drop events.\n            drag.startDrag();\n\n            // Change team name.\n            document.addEventListener(\"change\", function (event) {\n                if (event.target.dataset.handler === 'input_team_name') {\n                    set_new_team_name(event.target);\n                }\n            });\n\n            // Close all popups by esc.\n            document.addEventListener(\"keydown\", function (event) {\n                if (event.keyCode === 27) {\n                    skin.remove();\n                    popup.remove();\n                }\n            });\n        }\n    };\n});\n"],"file":"init.min.js"}