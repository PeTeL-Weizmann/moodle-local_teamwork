{"version":3,"file":"skin.min.js","sources":["../src/skin.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable max-len */\n/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\ndefine([\n    'core/str',\n    'jquery',\n    'local_teamwork/keyboardnav',\n], function (str, $, Keyboardnav) {\n    'use strict';\n\n    str.get_strings([\n        { key: 'close', component: 'local_teamwork' },\n        { key: 'popuperrormessage', component: 'local_teamwork' }\n    ]).done(function () {\n    });\n\n    const mainBlock = document.querySelector('body');\n\n    const closeBtnStr = M.util.get_string('close', 'local_teamwork');\n\n    const skin = {\n        SKINSTATE: null,\n        content: '',\n        shadow: 'skin_hide',\n\n        show: function () {\n\n            const popup = document.createElement('div');\n            popup.classList.add('skin', 'shadow', 'teamworkdialog');\n            popup.innerHTML = `\n                <div class = \"skin_close\" role=\"button\" tabindex=\"0\" aria-label=\"${closeBtnStr}\"></div>\n                <div class=\"skin_inner\"></div>\n                <div class=\"skin_shadow ${this.shadow}\"></div>\n                `;\n            const popupInner = popup.querySelector('.skin_inner');\n            popupInner.innerHTML = this.content;\n            this.remove();\n            mainBlock.appendChild(popup);\n\n            // Loop focused elements inside popup. Accessibility task\n\n            // this.popupSkinState();\n            this.checkPopupSkinState();\n            if(!this.SKINSTATE) {\n                Keyboardnav.getFocusableElements('.teamworkdialog', '[data-handler=\"teamwork_toggle\"], .skin_close');\n            } else {\n                Keyboardnav.getFocusableElements('.teamworkdialog');\n            }\n            Keyboardnav.setFocusOnElement('[data-handler=\"teamwork_toggle\"]');\n            Keyboardnav.setAccessabilityBehaviuor();\n\n        },\n         /**\n        * Check if popup shadow skin is visible.\n         * @param  {string} skinState - The state of modal shadow block.\n         */\n         checkPopupSkinState: function (skinState) {\n            // Set skin_shadow state on popup parrent element.\n            if (!skinState) {\n                skinState = $('[data-handler=\"teamwork_toggle\"]').data('state');\n            }\n            this.SKINSTATE = skinState === 'active' ? true : false;\n            $(\".teamworkdialog\").attr('data-state', skinState);\n        },\n\n\n        /**\n         * Check popup skin state and set approporate behaviour.\n         */\n        // checkPopupSkinState: function () {\n        //     if (this.SKINSTATE) {\n        //         this.getFocusableElements('.teamworkdialog');\n        //     } else if (!this.SKINSTATE) {\n        //         this.getFocusableElements('.teamworkdialog', '[data-handler=\"teamwork_toggle\"], .skin_close');\n        //     }\n        // },\n\n        remove: function () {\n            if (mainBlock.querySelector('.skin')) {\n                mainBlock.querySelector('.skin').remove();\n\n                let links = $('.submissionlinks a');\n                if (links.length !== 0) {\n                    links[0].focus();\n                }\n            }\n        }\n\n    };\n\n    return skin;\n\n});\n"],"names":["define","str","$","Keyboardnav","get_strings","key","component","done","mainBlock","document","querySelector","closeBtnStr","M","util","get_string","SKINSTATE","content","shadow","show","popup","createElement","classList","add","innerHTML","this","remove","appendChild","checkPopupSkinState","getFocusableElements","setFocusOnElement","setAccessabilityBehaviuor","skinState","data","attr","links","length","focus"],"mappings":"AAIAA,6BAAO,CACH,WACA,SACA,+BACD,SAAUC,IAAKC,EAAGC,aAGjBF,IAAIG,YAAY,CACZ,CAAEC,IAAK,QAASC,UAAW,kBAC3B,CAAED,IAAK,oBAAqBC,UAAW,oBACxCC,MAAK,mBAGFC,UAAYC,SAASC,cAAc,QAEnCC,YAAcC,EAAEC,KAAKC,WAAW,QAAS,wBAElC,CACTC,UAAW,KACXC,QAAS,GACTC,OAAQ,YAERC,KAAM,eAEIC,MAAQV,SAASW,cAAc,OACrCD,MAAME,UAAUC,IAAI,OAAQ,SAAU,kBACtCH,MAAMI,uGACiEZ,yHAEzCa,KAAKP,qCAEhBE,MAAMT,cAAc,eAC5Ba,UAAYC,KAAKR,aACvBS,SACLjB,UAAUkB,YAAYP,YAKjBQ,sBACDH,KAAKT,UAGLZ,YAAYyB,qBAAqB,mBAFjCzB,YAAYyB,qBAAqB,kBAAmB,iDAIxDzB,YAAY0B,kBAAkB,oCAC9B1B,YAAY2B,6BAOfH,oBAAqB,SAAUI,WAEvBA,YACDA,UAAY7B,EAAE,oCAAoC8B,KAAK,eAEtDjB,UAA0B,WAAdgB,UACjB7B,EAAE,mBAAmB+B,KAAK,aAAcF,YAe5CN,OAAQ,cACAjB,UAAUE,cAAc,SAAU,CAClCF,UAAUE,cAAc,SAASe,aAE7BS,MAAQhC,EAAE,sBACO,IAAjBgC,MAAMC,QACND,MAAM,GAAGE,UAS5B"}