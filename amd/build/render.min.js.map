{"version":3,"file":"render.min.js","sources":["../src/render.js"],"sourcesContent":["/* eslint-disable no-console */\ndefine([\n    'core/yui',\n    \"core/ajax\",\n    'local_teamwork/popup',\n    'local_teamwork/skin',\n    'local_teamwork/keyboardnav',\n    'local_teamwork/voicecontrol',\n], function (Y, Ajax, popup, skin, Keyboardnav, Voicecontrol) {\n    'use strict';\n\n    let render = {\n        data: '',\n        sesskey: M.cfg.sesskey,\n\n        // Set default data.\n        setDefaultData: function () {\n            let sesskey = this.data.sesskey;\n            let courseid = this.data.courseid;\n            let activityid = this.data.activityid;\n            let moduletype = this.data.moduletype;\n            let selectgroupid = this.data.selectgroupid;\n\n            this.data = {\n                sesskey: sesskey,\n                courseid: courseid,\n                activityid: activityid,\n                moduletype: moduletype,\n                selectgroupid: selectgroupid\n            };\n        },\n\n        // Open main block.\n        mainBlock: function (searchInit, voicecontrolenabled) {\n\n\n            Ajax.call([{\n                methodname: 'local_teamwork_render_teamwork_html',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    skin.shadow = result.shadow;\n                    skin.content = result.content;\n                    skin.show();\n                    searchInit();\n\n                    Keyboardnav.getFocusableElements('.teamworkdialog');\n                    Keyboardnav.setAccessabilityBehaviuor();\n\n\n                    // Voicecontrol.voice_add_new_teamcard(\n                    //     Number(self.data.courseid),\n                    //     Number(self.data.activityid),\n                    //     self.data.moduletype,\n                    //     self.data.selectgroupid);\n\n\n                    // Voicecontrol.voice_drag_student_card(\n                    //     Number(self.data.courseid),\n                    //     Number(self.data.activityid),\n                    //     self.data.moduletype,\n                    //     self.data.selectgroupid\n                    //     // courseid, activityid, moduletype, selectgroupid,\n                    //     // self\n                    // );\n\n\n                    if (voicecontrolenabled !== 0) {\n                        Voicecontrol.update_commands();\n                    }\n\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        },\n\n        studentList: function () {\n            const targetBlock = document.querySelector('#studentList');\n\n            return Ajax.call([{\n                methodname: 'local_teamwork_render_student_list',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    targetBlock.innerHTML = result.content;\n                    Keyboardnav.getFocusableElements('.teamworkdialog');\n                    Keyboardnav.setAccessabilityBehaviuor();\n                    Keyboardnav.setFocusOnPrevfocusedElement();\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        },\n\n        teamsCard: function () {\n            const targetBlock = document.querySelector('#teamsCard');\n\n            return Ajax.call([{\n                methodname: 'local_teamwork_render_teams_card',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    targetBlock.innerHTML = result.content;\n                    Keyboardnav.getFocusableElements('.teamworkdialog');\n                    Keyboardnav.setAccessabilityBehaviuor();\n                    Keyboardnav.setFocusOnPrevfocusedElement();\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        }\n\n    };\n\n    return render;\n\n});\n"],"names":["define","Y","Ajax","popup","skin","Keyboardnav","Voicecontrol","data","sesskey","M","cfg","setDefaultData","this","courseid","activityid","moduletype","selectgroupid","mainBlock","searchInit","voicecontrolenabled","call","methodname","args","Number","done","result","JSON","parse","shadow","content","show","getFocusableElements","setAccessabilityBehaviuor","update_commands","fail","error","studentList","targetBlock","document","querySelector","innerHTML","setFocusOnPrevfocusedElement","teamsCard"],"mappings":"AACAA,+BAAO,CACH,WACA,YACA,uBACA,sBACA,6BACA,gCACD,SAAUC,EAAGC,KAAMC,MAAOC,KAAMC,YAAaC,oBAG/B,CACTC,KAAM,GACNC,QAASC,EAAEC,IAAIF,QAGfG,eAAgB,eACRH,QAAUI,KAAKL,KAAKC,QACpBK,SAAWD,KAAKL,KAAKM,SACrBC,WAAaF,KAAKL,KAAKO,WACvBC,WAAaH,KAAKL,KAAKQ,WACvBC,cAAgBJ,KAAKL,KAAKS,mBAEzBT,KAAO,CACRC,QAASA,QACTK,SAAUA,SACVC,WAAYA,WACZC,WAAYA,WACZC,cAAeA,gBAKvBC,UAAW,SAAUC,WAAYC,qBAG7BjB,KAAKkB,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CACFT,SAAUU,OAAOX,KAAKL,KAAKM,UAC3BC,WAAYS,OAAOX,KAAKL,KAAKO,YAC7BC,WAAYH,KAAKL,KAAKQ,WACtBC,cAAeJ,KAAKL,KAAKS,eAE7BQ,KAAM,SAAUjB,UACRkB,OAASC,KAAKC,MAAMpB,KAAKkB,QAC7BrB,KAAKwB,OAASH,OAAOG,OACrBxB,KAAKyB,QAAUJ,OAAOI,QACtBzB,KAAK0B,OACLZ,aAEAb,YAAY0B,qBAAqB,mBACjC1B,YAAY2B,4BAoBgB,IAAxBb,qBACAb,aAAa2B,mBAIrBC,KAAM,WACF/B,MAAMgC,aAKlBC,YAAa,eACHC,YAAcC,SAASC,cAAc,uBAEpCrC,KAAKkB,KAAK,CAAC,CACdC,WAAY,qCACZC,KAAM,CACFT,SAAUU,OAAOX,KAAKL,KAAKM,UAC3BC,WAAYS,OAAOX,KAAKL,KAAKO,YAC7BC,WAAYH,KAAKL,KAAKQ,WACtBC,cAAeJ,KAAKL,KAAKS,eAE7BQ,KAAM,SAAUjB,UACRkB,OAASC,KAAKC,MAAMpB,KAAKkB,QAC7BY,YAAYG,UAAYf,OAAOI,QAC/BxB,YAAY0B,qBAAqB,mBACjC1B,YAAY2B,4BACZ3B,YAAYoC,gCAEhBP,KAAM,WACF/B,MAAMgC,aAKlBO,UAAW,eACDL,YAAcC,SAASC,cAAc,qBAEpCrC,KAAKkB,KAAK,CAAC,CACdC,WAAY,mCACZC,KAAM,CACFT,SAAUU,OAAOX,KAAKL,KAAKM,UAC3BC,WAAYS,OAAOX,KAAKL,KAAKO,YAC7BC,WAAYH,KAAKL,KAAKQ,WACtBC,cAAeJ,KAAKL,KAAKS,eAE7BQ,KAAM,SAAUjB,UACRkB,OAASC,KAAKC,MAAMpB,KAAKkB,QAC7BY,YAAYG,UAAYf,OAAOI,QAC/BxB,YAAY0B,qBAAqB,mBACjC1B,YAAY2B,4BACZ3B,YAAYoC,gCAEhBP,KAAM,WACF/B,MAAMgC,aASzB"}