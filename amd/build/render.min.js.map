{"version":3,"sources":["../src/render.js"],"names":["define","Y","Ajax","popup","skin","render","data","sesskey","M","cfg","setDefaultData","courseid","activityid","moduletype","selectgroupid","mainBlock","searchInit","call","methodname","args","done","result","JSON","parse","shadow","content","show","fail","error","studentList","targetBlock","document","querySelector","innerHTML","teamsCard"],"mappings":"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","sourcesContent":["define([\n    'core/yui',\n    \"core/ajax\",\n    'local_teamwork/popup',\n    'local_teamwork/skin',\n], function (Y, Ajax, popup, skin) {\n    'use strict';\n\n    let render = {\n        data: '',\n        sesskey: M.cfg.sesskey,\n\n        // Set default data.\n        setDefaultData: function () {\n            let sesskey = this.data.sesskey;\n            let courseid = this.data.courseid;\n            let activityid = this.data.activityid;\n            let moduletype = this.data.moduletype;\n            let selectgroupid = this.data.selectgroupid;\n\n            this.data = {\n                sesskey: sesskey,\n                courseid: courseid,\n                activityid: activityid,\n                moduletype: moduletype,\n                selectgroupid: selectgroupid\n            };\n        },\n\n        // Open main block.\n        mainBlock: function (searchInit) {\n            Ajax.call([{\n                methodname: 'local_teamwork_render_teamwork_html',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    skin.shadow = result.shadow;\n                    skin.content = result.content;\n                    skin.show();\n                    searchInit();\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        },\n\n        studentList: function () {\n            const targetBlock = document.querySelector('#studentList');\n\n            Ajax.call([{\n                methodname: 'local_teamwork_render_student_list',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    targetBlock.innerHTML = result.content;\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        },\n\n        teamsCard: function () {\n            const targetBlock = document.querySelector('#teamsCard');\n\n            Ajax.call([{\n                methodname: 'local_teamwork_render_teams_card',\n                args: {\n                    courseid: Number(this.data.courseid),\n                    activityid: Number(this.data.activityid),\n                    moduletype: this.data.moduletype,\n                    selectgroupid: this.data.selectgroupid\n                },\n                done: function (data) {\n                    let result = JSON.parse(data.result);\n                    targetBlock.innerHTML = result.content;\n                },\n                fail: function () {\n                    popup.error();\n                }\n            }]);\n        }\n\n    };\n\n    return render;\n\n});\n"],"file":"render.min.js"}